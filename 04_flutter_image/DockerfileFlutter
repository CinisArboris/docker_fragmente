# Usar una imagen base de Debian
FROM debian:bookworm

# Instalar dependencias necesarias para descargar y descomprimir archivos, y para que funcionen el SDK y Flutter
#RUN apt-get update && apt-get install -y wget unzip openjdk-11-jdk

# Configurar las variables de entorno para los directorios de Flutter y Android SDK
ENV FLUTTER_HOME="/sdk/flutter"
ENV ANDROID_SDK_ROOT="/sdk/android"

# Incluir las rutas de Flutter y Android en la variable PATH
ENV PATH="$PATH:$FLUTTER_HOME/bin:$ANDROID_SDK_ROOT/cmdline-tools/latest/bin:$ANDROID_SDK_ROOT/platform-tools"

# Crear los directorios necesarios
RUN mkdir -p /sdk/flutter
RUN mkdir -p /sdk/android

# Descargar y descomprimir Android Command Line Tools en el directorio correspondiente
RUN wget https://dl.google.com/android/repository/commandlinetools-linux-7302050_latest.zip -O /tmp/cmdline-tools.zip \
    && unzip /tmp/cmdline-tools.zip -d $ANDROID_SDK_ROOT/cmdline-tools \
    && mv $ANDROID_SDK_ROOT/cmdline-tools/cmdline-tools $ANDROID_SDK_ROOT/cmdline-tools/latest

# Aceptar todas las licencias del Android SDK
#RUN yes | $ANDROID_SDK_ROOT/cmdline-tools/latest/bin/sdkmanager --licenses

# Instalar las versiones específicas del Android SDK y las herramientas de construcción
# Aquí se especifica la versión 21 como versión mínima soportada. También puedes añadir otras versiones si necesitas soporte adicional.
#RUN $ANDROID_SDK_ROOT/cmdline-tools/latest/bin/sdkmanager "platform-tools" "platforms;android-21" "build-tools;30.0.3"

# Resto de comandos para configurar tu entorno Flutter, si es necesario...

# Establecer el directorio de trabajo (donde se ejecutarán los comandos subsiguientes)
WORKDIR /flutterProyect
